---
import Layout from '../layouts/Layout.astro';
import EventCard from '../components/events/EventCard.astro';
import FeaturedEvent from '../components/events/FeaturedEvent.astro';

// Mock events data
const events = [
	{
		id: 1,
		title: 'HPSC Annual Conference 2025',
		type: 'Conference',
		date: '2025-11-18',
		endDate: '2025-11-20',
		time: '8:00 AM - 5:00 PM',
		location: 'Vancouver Convention Centre',
		address: '1055 Canada Place, Vancouver, BC',
		description:
			'Join us for three days of learning, networking, and innovation in the residential retrofit industry. Featuring keynote speakers, technical workshops, and industry exhibitions.',
		image: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: '$395 (Early Bird)',
		highlights: [
			'50+ expert speakers',
			'Technical workshops',
			'Industry exhibition',
			'Networking events',
			'CE credits available',
		],
	},
	{
		id: 2,
		title: 'Building Science Fundamentals Workshop',
		type: 'Training',
		date: '2025-10-15',
		endDate: '2025-10-17',
		time: '9:00 AM - 4:00 PM',
		location: 'HPSC Training Centre',
		address: '123 Energy Efficiency Way, Vancouver, BC',
		description:
			'Three-day intensive workshop covering building science principles, heat transfer, air movement, and moisture management for residential applications.',
		image: 'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: 'Subsidized for HPCN members',
		highlights: [
			'Hands-on learning',
			'Industry experts',
			'Certificate of completion',
			'Course materials included',
		],
	},
	{
		id: 3,
		title: 'Heat Pump Technology Webinar Series',
		type: 'Webinar',
		date: '2025-10-25',
		endDate: null,
		time: '12:00 PM - 1:00 PM PST',
		location: 'Online',
		address: null,
		description:
			'Monthly webinar series exploring the latest in heat pump technology, cold climate performance, and installation best practices.',
		image: 'https://images.unsplash.com/photo-1621905251918-48416bd8575a?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: 'Free',
		highlights: ['Expert presenters', 'Live Q&A', 'Recording available', 'Free for all attendees'],
	},
	{
		id: 4,
		title: 'Contractor Networking Breakfast',
		type: 'Networking',
		date: '2025-10-12',
		endDate: null,
		time: '7:30 AM - 9:30 AM',
		location: 'Fairmont Hotel Vancouver',
		address: '900 W Georgia St, Vancouver, BC',
		description:
			'Monthly networking breakfast for HPCN contractors to connect, share experiences, and discuss industry challenges and opportunities.',
		image: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: '$35 (includes breakfast)',
		highlights: [
			'Industry networking',
			'Guest speakers',
			'Continental breakfast',
			'HPCN members priority',
		],
	},
	{
		id: 5,
		title: 'Energy Efficiency Policy Forum',
		type: 'Forum',
		date: '2025-11-08',
		endDate: null,
		time: '1:00 PM - 5:00 PM',
		location: 'BC Legislature',
		address: '501 Belleville St, Victoria, BC',
		description:
			'Annual forum bringing together policymakers, industry leaders, and stakeholders to discuss energy efficiency policy and program development in BC.',
		image: 'https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=1200&h=800&fit=crop',
		status: 'Coming Soon',
		price: 'Free',
		highlights: [
			'Government officials',
			'Policy discussions',
			'Industry input',
			'Networking reception',
		],
	},
	{
		id: 6,
		title: 'Advanced Insulation Techniques',
		type: 'Training',
		date: '2025-11-12',
		endDate: '2025-11-13',
		time: '8:30 AM - 4:30 PM',
		location: 'Okanagan Training Facility',
		address: '456 Retrofit Rd, Kelowna, BC',
		description:
			'Two-day hands-on workshop covering advanced insulation techniques, including spray foam, dense pack, and retrofit applications.',
		image: 'https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: '$450',
		highlights: [
			'Hands-on practice',
			'Multiple techniques',
			'Safety protocols',
			'Industry certification',
		],
	},
];

// Event types for filtering
const eventTypes = ['All', ...new Set(events.map((e) => e.type))];
---

<Layout
	title="Events & Conferences | HPSC"
	description="Upcoming events, conferences, training sessions, and networking opportunities for home performance professionals in British Columbia."
	keywords="home performance events, energy efficiency conference, contractor training, networking events, BC building science, HPSC events"
	breadcrumbs={[{ label: 'Events', href: '/events' }]}
>
	<!-- Page Header -->
	<div class="mb-12">
		<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">Events & Conferences</h1>
		<p class="text-xl text-gray-700 leading-relaxed max-w-4xl">
			Connect with industry professionals, expand your knowledge, and stay current with the latest
			developments in home performance and energy efficiency.
		</p>
	</div>

	<!-- Filter Section -->
	<section class="mb-8">
		<div class="flex flex-wrap items-center gap-3">
			<span class="text-gray-700 font-semibold">Filter by type:</span>
			{
				eventTypes.map((type) => (
					<button
						data-type={type}
						class={`filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all ${
							type === 'All'
								? 'bg-primary-dark text-white'
								: 'bg-gray-100 text-gray-700 hover:bg-gray-200'
						}`}
					>
						{type}
					</button>
				))
			}
		</div>
	</section>

	<!-- Featured Event -->
	<section class="mb-16">
		<FeaturedEvent
			title={events[0].title}
			date={events[0].date}
			endDate={events[0].endDate}
			location={events[0].location}
			description={events[0].description}
			image={events[0].image}
		/>
	</section>

	<!-- Upcoming Events Grid -->
	<section class="mb-16">
		<h2 class="text-3xl font-bold text-gray-900 mb-8">Upcoming Events</h2>
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="events-grid">
			{events.slice(1).map((event) => <EventCard {...event} />)}
		</div>
	</section>

	<!-- Newsletter CTA -->
	<section>
		<div class="bg-primary/5 rounded-2xl p-8 md:p-12 border-2 border-primary/20">
			<div class="max-w-3xl mx-auto text-center">
				<h2 class="text-3xl font-bold text-gray-900 mb-4">Stay Informed About Upcoming Events</h2>
				<p class="text-lg text-gray-700 mb-8">
					Subscribe to our newsletter to receive updates about new training sessions, conferences,
					and networking opportunities.
				</p>
				<form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
					<label for="newsletter-email" class="sr-only">Email address</label>
					<input
						id="newsletter-email"
						type="email"
						name="email"
						placeholder="Your email address"
						class="flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary"
						required
						aria-label="Email address for newsletter subscription"
					/>
					<button
						type="submit"
						class="px-8 py-3 bg-primary-dark text-white rounded-lg font-semibold hover:bg-primary-dark transition-colors"
					>
						Subscribe
					</button>
				</form>
			</div>
		</div>
	</section>
</Layout>

<script>
	// Filter functionality
	const filterButtons = document.querySelectorAll('.filter-btn');
	const eventCards = document.querySelectorAll('.event-card');

	function filterEvents(type: string) {
		eventCards.forEach((card) => {
			const cardType = card.getAttribute('data-type');
			if (type === 'All' || cardType === type) {
				card.classList.remove('hidden');
			} else {
				card.classList.add('hidden');
			}
		});

		// Update button styles
		filterButtons.forEach((btn) => {
			const btnType = btn.getAttribute('data-type');
			if (btnType === type) {
				btn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
				btn.classList.add('bg-primary-dark', 'text-white');
			} else {
				btn.classList.remove('bg-primary-dark', 'text-white');
				btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
			}
		});
	}

	filterButtons.forEach((button) => {
		button.addEventListener('click', () => {
			const type = button.getAttribute('data-type') || 'All';
			filterEvents(type);
		});
	});
</script>
