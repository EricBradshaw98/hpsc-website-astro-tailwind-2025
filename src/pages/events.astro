---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';

// Mock events data
const events = [
	{
		id: 1,
		title: 'HPSC Annual Conference 2025',
		type: 'Conference',
		date: '2025-11-18',
		endDate: '2025-11-20',
		time: '8:00 AM - 5:00 PM',
		location: 'Vancouver Convention Centre',
		address: '1055 Canada Place, Vancouver, BC',
		description:
			'Join us for three days of learning, networking, and innovation in the residential retrofit industry. Featuring keynote speakers, technical workshops, and industry exhibitions.',
		image: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: '$395 (Early Bird)',
		highlights: [
			'50+ expert speakers',
			'Technical workshops',
			'Industry exhibition',
			'Networking events',
			'CE credits available',
		],
	},
	{
		id: 2,
		title: 'Building Science Fundamentals Workshop',
		type: 'Training',
		date: '2025-10-15',
		endDate: '2025-10-17',
		time: '9:00 AM - 4:00 PM',
		location: 'HPSC Training Centre',
		address: '123 Energy Efficiency Way, Vancouver, BC',
		description:
			'Three-day intensive workshop covering building science principles, heat transfer, air movement, and moisture management for residential applications.',
		image: 'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: 'Subsidized for HPCN members',
		highlights: [
			'Hands-on learning',
			'Industry experts',
			'Certificate of completion',
			'Course materials included',
		],
	},
	{
		id: 3,
		title: 'Heat Pump Technology Webinar Series',
		type: 'Webinar',
		date: '2025-10-25',
		endDate: null,
		time: '12:00 PM - 1:00 PM PST',
		location: 'Online',
		address: null,
		description:
			'Monthly webinar series exploring the latest in heat pump technology, cold climate performance, and installation best practices.',
		image: 'https://images.unsplash.com/photo-1621905251918-48416bd8575a?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: 'Free',
		highlights: [
			'Expert presenters',
			'Live Q&A',
			'Recording available',
			'Free for all attendees',
		],
	},
	{
		id: 4,
		title: 'Contractor Networking Breakfast',
		type: 'Networking',
		date: '2025-10-12',
		endDate: null,
		time: '7:30 AM - 9:30 AM',
		location: 'Fairmont Hotel Vancouver',
		address: '900 W Georgia St, Vancouver, BC',
		description:
			'Monthly networking breakfast for HPCN contractors to connect, share experiences, and discuss industry challenges and opportunities.',
		image: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: '$35 (includes breakfast)',
		highlights: [
			'Industry networking',
			'Guest speakers',
			'Continental breakfast',
			'HPCN members priority',
		],
	},
	{
		id: 5,
		title: 'Energy Efficiency Policy Forum',
		type: 'Forum',
		date: '2025-11-08',
		endDate: null,
		time: '1:00 PM - 5:00 PM',
		location: 'BC Legislature',
		address: '501 Belleville St, Victoria, BC',
		description:
			'Annual forum bringing together policymakers, industry leaders, and stakeholders to discuss energy efficiency policy and program development in BC.',
		image: 'https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=1200&h=800&fit=crop',
		status: 'Coming Soon',
		price: 'Free',
		highlights: [
			'Government officials',
			'Policy discussions',
			'Industry input',
			'Networking reception',
		],
	},
	{
		id: 6,
		title: 'Advanced Insulation Techniques',
		type: 'Training',
		date: '2025-11-12',
		endDate: '2025-11-13',
		time: '8:30 AM - 4:30 PM',
		location: 'Okanagan Training Facility',
		address: '456 Retrofit Rd, Kelowna, BC',
		description:
			'Two-day hands-on workshop covering advanced insulation techniques, including spray foam, dense pack, and retrofit applications.',
		image: 'https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=1200&h=800&fit=crop',
		status: 'Registration Open',
		price: '$450',
		highlights: [
			'Hands-on practice',
			'Multiple techniques',
			'Safety protocols',
			'Industry certification',
		],
	},
];

// Event types for filtering
const eventTypes = ['All', ...new Set(events.map((e) => e.type))];

// Format dates
function formatDate(dateString: string, endDateString?: string | null) {
	const date = new Date(dateString);
	const options: Intl.DateTimeFormatOptions = {
		year: 'numeric',
		month: 'long',
		day: 'numeric',
	};
	if (endDateString) {
		const endDate = new Date(endDateString);
		return `${date.toLocaleDateString('en-US', options)} - ${endDate.toLocaleDateString('en-US', options)}`;
	}
	return date.toLocaleDateString('en-US', options);
}
---

<Layout
	title="Events & Conferences | HPSC"
	description="Upcoming events, conferences, training sessions, and networking opportunities for home performance professionals in British Columbia."
	keywords="home performance events, energy efficiency conference, contractor training, networking events, BC building science, HPSC events"
	breadcrumbs={[{ label: 'Events', href: '/events' }]}
>
	<!-- Page Header -->
	<div class="mb-12">
		<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">Events & Conferences</h1>
		<p class="text-xl text-gray-700 leading-relaxed max-w-4xl">
			Connect with industry professionals, expand your knowledge, and stay current with the latest
			developments in home performance and energy efficiency.
		</p>
	</div>

	<!-- Filter Section -->
	<section class="mb-8">
		<div class="flex flex-wrap items-center gap-3">
			<span class="text-gray-700 font-semibold">Filter by type:</span>
			{
				eventTypes.map((type) => (
					<button
						data-type={type}
						class={`filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all ${
							type === 'All'
								? 'bg-primary text-white'
								: 'bg-gray-100 text-gray-700 hover:bg-gray-200'
						}`}
					>
						{type}
					</button>
				))
			}
		</div>
	</section>

	<!-- Featured Event -->
	<section class="mb-16">
		<div class="bg-gradient-to-r from-primary to-primary-dark rounded-2xl overflow-hidden shadow-2xl">
			<div class="grid grid-cols-1 lg:grid-cols-2">
				<div class="relative h-96 lg:h-auto">
					<Image
						src={events[0].image}
						alt={events[0].title}
						class="w-full h-full object-cover"
						width={1200}
						height={800}
						loading="eager"
					/>
				</div>
				<div class="p-8 md:p-12 text-white">
					<span
						class="inline-block px-3 py-1 bg-white/20 text-white text-sm font-semibold rounded-full mb-4"
					>
						Featured Event
					</span>
					<h2 class="text-3xl md:text-4xl font-bold mb-4">{events[0].title}</h2>
					<div class="space-y-2 mb-6">
						<div class="flex items-center gap-2">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
								></path>
							</svg>
							<span>{formatDate(events[0].date, events[0].endDate)}</span>
						</div>
						<div class="flex items-center gap-2">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
								></path>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
								></path>
							</svg>
							<span>{events[0].location}</span>
						</div>
					</div>
					<p class="text-white/90 mb-6">{events[0].description}</p>
					<a
						href="/contact"
						class="inline-flex items-center gap-2 px-8 py-3 bg-white text-primary rounded-lg font-semibold hover:bg-gray-100 transition-colors"
					>
						Register Now
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Upcoming Events Grid -->
	<section class="mb-16">
		<h2 class="text-3xl font-bold text-gray-900 mb-8">Upcoming Events</h2>
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="events-grid">
			{
				events.slice(1).map((event) => (
					<article
						data-type={event.type}
						class="event-card bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-200"
					>
						<div class="relative h-48 overflow-hidden">
							<Image
								src={event.image}
								alt={event.title}
								class="w-full h-full object-cover"
								width={1200}
								height={800}
								loading="lazy"
							/>
							<div class="absolute top-4 left-4">
								<span class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">
									{event.type}
								</span>
							</div>
							<div class="absolute top-4 right-4">
								<span
									class={`px-3 py-1 text-white text-xs font-semibold rounded-full ${
										event.status === 'Registration Open' ? 'bg-green' : 'bg-orange'
									}`}
								>
									{event.status}
								</span>
							</div>
						</div>
						<div class="p-6">
							<h3 class="text-xl font-bold text-gray-900 mb-3">{event.title}</h3>
							<div class="space-y-2 mb-4">
								<div class="flex items-start gap-2 text-sm text-gray-600">
									<svg
										class="w-4 h-4 flex-shrink-0 mt-0.5"
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
										/>
									</svg>
									<span>{formatDate(event.date, event.endDate)}</span>
								</div>
								<div class="flex items-start gap-2 text-sm text-gray-600">
									<svg
										class="w-4 h-4 flex-shrink-0 mt-0.5"
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
										/>
									</svg>
									<span>{event.time}</span>
								</div>
								<div class="flex items-start gap-2 text-sm text-gray-600">
									<svg
										class="w-4 h-4 flex-shrink-0 mt-0.5"
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
										/>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
										/>
									</svg>
									<span>{event.location}</span>
								</div>
							</div>
							<p class="text-gray-600 text-sm mb-4">{event.description}</p>
							<div class="mb-4">
								<ul class="space-y-1">
									{event.highlights.slice(0, 3).map((highlight) => (
										<li class="flex items-start gap-2 text-xs text-gray-600">
											<svg
												class="w-3 h-3 text-primary flex-shrink-0 mt-0.5"
												fill="none"
												stroke="currentColor"
												viewBox="0 0 24 24"
											>
												<path
													stroke-linecap="round"
													stroke-linejoin="round"
													stroke-width="2"
													d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
												/>
											</svg>
											<span>{highlight}</span>
										</li>
									))}
								</ul>
							</div>
							<div class="pt-4 border-t border-gray-200 flex items-center justify-between">
								<span class="text-lg font-bold text-primary">{event.price}</span>
								<a
									href="/contact"
									class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm font-semibold"
								>
									{event.status === 'Registration Open' ? 'Register' : 'Learn More'}
								</a>
							</div>
						</div>
					</article>
				))
			}
		</div>
	</section>

	<!-- Newsletter CTA -->
	<section>
		<div class="bg-primary/5 rounded-2xl p-8 md:p-12 border-2 border-primary/20">
			<div class="max-w-3xl mx-auto text-center">
				<h2 class="text-3xl font-bold text-gray-900 mb-4">Stay Informed About Upcoming Events</h2>
				<p class="text-lg text-gray-700 mb-8">
					Subscribe to our newsletter to receive updates about new training sessions, conferences,
					and networking opportunities.
				</p>
				<form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
					<input
						type="email"
						placeholder="Your email address"
						class="flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-primary"
						required
					/>
					<button
						type="submit"
						class="px-8 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary-dark transition-colors"
					>
						Subscribe
					</button>
				</form>
			</div>
		</div>
	</section>
</Layout>

<script>
	// Filter functionality
	const filterButtons = document.querySelectorAll('.filter-btn');
	const eventCards = document.querySelectorAll('.event-card');

	function filterEvents(type: string) {
		eventCards.forEach((card) => {
			const cardType = card.getAttribute('data-type');
			if (type === 'All' || cardType === type) {
				card.classList.remove('hidden');
			} else {
				card.classList.add('hidden');
			}
		});

		// Update button styles
		filterButtons.forEach((btn) => {
			const btnType = btn.getAttribute('data-type');
			if (btnType === type) {
				btn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
				btn.classList.add('bg-primary', 'text-white');
			} else {
				btn.classList.remove('bg-primary', 'text-white');
				btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
			}
		});
	}

	filterButtons.forEach((button) => {
		button.addEventListener('click', () => {
			const type = button.getAttribute('data-type') || 'All';
			filterEvents(type);
		});
	});
</script>
