---
import { Image } from 'astro:assets';
import Layout from '../../../layouts/Layout.astro';
import Breadcrumbs from '../../../components/layouts/Breadcrumbs.astro';

const { slug } = Astro.params;

export async function getStaticPaths() {
	// Will fetch from WordPress later - for now return sample slugs
	return [
		{ params: { slug: 'getting-started-with-home-energy-assessments' } },
		{ params: { slug: 'heat-pump-installation-checklist' } },
		{ params: { slug: 'understanding-rebate-programs' } },
		{ params: { slug: 'air-sealing-best-practices' } },
		{ params: { slug: 'choosing-the-right-insulation' } },
		{ params: { slug: 'blower-door-testing-guide' } },
		{ params: { slug: 'hpsc-certification-application' } },
		{ params: { slug: 'winter-energy-saving-tips' } },
		{ params: { slug: 'moisture-management-essentials' } },
	];
}

// Guide content - will be fetched from WordPress later
const guides: Record<string, any> = {
	'heat-pump-installation-checklist': {
		title: 'Heat Pump Installation: Complete Checklist',
		description:
			'Everything contractors need to know for a successful heat pump installation from start to finish.',
		category: 'Contractors',
		difficulty: 'Intermediate',
		readTime: '15 min',
		author: 'Technical Team',
		date: '2025-01-05',
		image: 'https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=1200&h=600&fit=crop',
		steps: [
			{
				title: 'Pre-Installation Site Assessment',
				content: `<p>A thorough site assessment is critical for heat pump success. This step ensures you select the right equipment and identify potential installation challenges before starting work.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800&h=450&fit=crop" alt="Heat pump outdoor unit installation site" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">Example of proper outdoor unit placement and clearances</p>
				</div>

				<h3>What to Evaluate</h3>
				<ul>
					<li><strong>Electrical capacity:</strong> Verify the home has adequate electrical service (usually 200A minimum for whole-home heat pumps)</li>
					<li><strong>Existing ductwork:</strong> Assess condition, sizing, and air leakage</li>
					<li><strong>Outdoor unit location:</strong> Identify suitable placement considering noise, drainage, and clearances</li>
					<li><strong>Indoor unit placement:</strong> Determine optimal locations for air handlers or heads</li>
					<li><strong>Building envelope:</strong> Note any major air leakage or insulation issues that should be addressed first</li>
				</ul>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Pro Tip:</strong> Take photos and measurements during assessment. This documentation helps with equipment selection and can prevent surprises during installation.
				</p>`,
			},
			{
				title: 'Equipment Selection and Sizing',
				content: `<p>Proper sizing is crucial - oversized heat pumps cycle frequently and provide poor comfort, while undersized units won't meet heating/cooling needs.</p>

				<h3>Sizing Process</h3>
				<ol>
					<li>Perform Manual J heat load calculation</li>
					<li>Account for BC climate (use appropriate design temperatures)</li>
					<li>Consider backup heating requirements for cold-climate systems</li>
					<li>Select equipment rated for local climate conditions</li>
					<li>Verify unit qualifies for available rebate programs</li>
				</ol>

				<h3>Cold Climate Considerations</h3>
				<p>For BC installations, prioritize heat pumps with:</p>
				<ul>
					<li>Rated heating capacity at -15Â°C or lower</li>
					<li>Variable-speed compressors for better part-load performance</li>
					<li>Enhanced defrost cycles for wet climates</li>
				</ul>`,
			},
			{
				title: 'Obtaining Permits and Rebates',
				content: `<p>Ensure all required permits and rebate applications are in place before beginning installation.</p>

				<h3>Required Permits</h3>
				<ul>
					<li>Electrical permit (almost always required)</li>
					<li>Building/HVAC permit (check local requirements)</li>
					<li>Gas disconnect permit (if removing gas furnace)</li>
				</ul>

				<h3>Rebate Programs</h3>
				<p>BC homeowners may be eligible for:</p>
				<ul>
					<li><strong>CleanBC rebates:</strong> Up to $7,000 for cold-climate heat pumps</li>
					<li><strong>Utility incentives:</strong> BC Hydro and FortisBC programs</li>
					<li><strong>Income-qualified programs:</strong> Enhanced rebates for eligible households</li>
				</ul>

				<div class="my-6 bg-gray-50 border-2 border-gray-200 rounded-xl overflow-hidden">
					<div class="bg-gray-100 px-6 py-3 border-b border-gray-200">
						<h4 class="font-bold text-gray-900 flex items-center gap-2">
							<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
							</svg>
							HPSC Rebate Application Guide
						</h4>
					</div>
					<iframe
						src="/documents/sample-document.pdf#view=FitH"
						class="w-full border-0"
						style="height: 600px;"
						title="HPSC Rebate Application Guide"
					></iframe>
					<div class="bg-gray-100 px-6 py-3 border-t border-gray-200 flex items-center justify-between">
						<p class="text-sm text-gray-600">HPSC Rebate Application Guide</p>
						<a
							href="/documents/sample-document.pdf"
							download
							class="inline-flex items-center gap-2 text-primary hover:text-primary-dark font-medium text-sm"
						>
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
							</svg>
							Download PDF
						</a>
					</div>
				</div>

				<p class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4">
					<strong>Important:</strong> Pre-approval is required for most rebate programs. Submit applications before starting work.
				</p>`,
			},
			{
				title: 'Outdoor Unit Installation',
				content: `<p>Proper outdoor unit placement and installation ensures optimal performance and longevity.</p>

				<h3>Location Requirements</h3>
				<ul>
					<li>Minimum 24" clearance on service side, 12" on other sides</li>
					<li>Level pad (concrete, composite, or manufacturer-approved)</li>
					<li>Protection from roof runoff and snow loads</li>
					<li>Away from bedroom windows (noise consideration)</li>
					<li>Easy access for maintenance and snow clearing</li>
				</ul>

				<h3>Installation Steps</h3>
				<ol>
					<li>Install level pad with proper drainage</li>
					<li>Mount unit with vibration isolators</li>
					<li>Connect refrigerant lines (follow manufacturer specs for line sizing and insulation)</li>
					<li>Install condensate drain with freeze protection</li>
					<li>Run electrical supply in approved conduit</li>
					<li>Verify unit is level and secure</li>
				</ol>`,
			},
			{
				title: 'Indoor Unit and Ductwork',
				content: `<p>Indoor installation varies by system type but must ensure proper airflow and distribution.</p>

				<h3>Ducted Systems</h3>
				<ul>
					<li>Assess and seal existing ductwork (target <10% leakage)</li>
					<li>Resize supply/return as needed for heat pump airflow requirements</li>
					<li>Install air handler with proper clearances</li>
					<li>Add zoning controls if applicable</li>
					<li>Ensure adequate return air pathways</li>
				</ul>

				<h3>Ductless (Mini-Split) Systems</h3>
				<ul>
					<li>Mount indoor heads at optimal height (typically 7-8 feet)</li>
					<li>Ensure proper pitch for condensate drainage</li>
					<li>Route refrigerant lines and condensate drain through minimal penetrations</li>
					<li>Use approved line cover/conduit for exterior runs</li>
				</ul>`,
			},
			{
				title: 'Electrical Connections',
				content: `<p>All electrical work must meet BC Electrical Code and be performed by licensed electricians.</p>

				<h3>Electrical Requirements</h3>
				<ul>
					<li>Dedicated circuit(s) sized per equipment specifications</li>
					<li>Proper disconnect switches at indoor and outdoor units</li>
					<li>GFCI protection where required</li>
					<li>Low-voltage control wiring (thermostat, communication lines)</li>
				</ul>

				<h3>Common Issues to Avoid</h3>
				<ul>
					<li>Undersized wire gauge causing voltage drop</li>
					<li>Shared circuits leading to breaker trips</li>
					<li>Missing or improper disconnect switches</li>
					<li>Incorrect thermostat wiring</li>
				</ul>`,
			},
			{
				title: 'System Commissioning',
				content: `<p>Proper commissioning ensures the system operates as designed and meets performance expectations.</p>

				<div class="my-6 aspect-video rounded-xl overflow-hidden bg-gray-900">
					<iframe
						width="100%"
						height="100%"
						src="https://www.youtube.com/embed/dQw4w9WgXcQ"
						title="Heat Pump Commissioning Video"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen
						class="w-full h-full"
					></iframe>
					<p class="text-sm text-gray-500 mt-2 italic">Video tutorial: Commissioning a cold-climate heat pump</p>
				</div>

				<h3>Commissioning Checklist</h3>
				<ol>
					<li><strong>Refrigerant charge:</strong> Verify charge using manufacturer's procedures (superheat/subcooling)</li>
					<li><strong>Airflow:</strong> Measure and adjust to meet equipment specifications</li>
					<li><strong>Electrical:</strong> Check voltage, amperage, and verify all safety controls function</li>
					<li><strong>Drainage:</strong> Test condensate drains under operating conditions</li>
					<li><strong>Controls:</strong> Program thermostat, test all modes (heating, cooling, auto)</li>
					<li><strong>Defrost:</strong> Verify defrost cycle operates (or test initiation)</li>
				</ol>

				<h3>Performance Testing</h3>
				<ul>
					<li>Run system in both heating and cooling modes</li>
					<li>Measure temperature splits across indoor coil</li>
					<li>Check for unusual noises or vibrations</li>
					<li>Verify proper cycling and staging</li>
				</ul>`,
			},
			{
				title: 'Homeowner Training and Documentation',
				content: `<p>Educated homeowners are satisfied customers who will maintain their systems properly.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1556911220-bff31c812dba?w=800&h=450&fit=crop" alt="Homeowner learning about heat pump thermostat" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">Taking time to train homeowners ensures proper system operation</p>
				</div>

				<h3>What to Cover</h3>
				<ul>
					<li><strong>Thermostat operation:</strong> Programming, modes, emergency heat</li>
					<li><strong>Filter maintenance:</strong> Location, frequency, type to use</li>
					<li><strong>Normal operation:</strong> Expected sounds, frost formation, defrost cycles</li>
					<li><strong>Emergency procedures:</strong> How to turn off system, when to call for service</li>
					<li><strong>Warranty coverage:</strong> What's covered, registration requirements</li>
				</ul>

				<h3>Documentation to Provide</h3>
				<ul>
					<li>Equipment manuals and warranty information</li>
					<li>Installation photos and as-built drawings</li>
					<li>Commissioning test results</li>
					<li>Maintenance schedule and recommendations</li>
					<li>Rebate program documentation (if applicable)</li>
					<li>Service contact information</li>
				</ul>

				<div class="my-6 bg-gray-50 border-2 border-gray-200 rounded-xl p-6">
					<h4 class="font-bold text-gray-900 mb-3 flex items-center gap-2">
						<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
						</svg>
						Sample Homeowner Documentation Package
					</h4>
					<p class="text-gray-600 mb-4">Download our template homeowner documentation package that includes maintenance schedules, warranty information, and emergency procedures.</p>
					<a href="/documents/sample-document.pdf" target="_blank" class="inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
						</svg>
						Download PDF Template
					</a>
				</div>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Best Practice:</strong> Create a custom maintenance guide specific to the installed system. Include photos of filter locations and thermostat settings.
				</p>`,
			},
		],
		relatedGuides: [
			{
				slug: 'air-sealing-best-practices',
				title: 'Air Sealing Best Practices for Contractors',
				image: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&h=300&fit=crop',
			},
			{
				slug: 'blower-door-testing-guide',
				title: 'Complete Guide to Blower Door Testing',
				image: 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=400&h=300&fit=crop',
			},
		],
	},
	'getting-started-with-home-energy-assessments': {
		title: 'Getting Started with Home Energy Assessments',
		description:
			'A comprehensive guide to understanding and preparing for your home energy assessment.',
		category: 'Homeowners',
		difficulty: 'Beginner',
		readTime: '10 min',
		author: 'HPSC Team',
		date: '2025-01-06',
		image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=1200&h=600&fit=crop',
		steps: [
			{
				title: 'What is a Home Energy Assessment?',
				content: `<p>A home energy assessment (also called an energy audit) is a comprehensive evaluation of your home's energy use. A certified energy advisor will inspect your home to identify where you're losing energy and money.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=450&fit=crop" alt="Energy advisor conducting home assessment" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">A certified energy advisor performing a home energy assessment</p>
				</div>

				<p>During the assessment, the advisor will:</p>
				<ul>
					<li>Conduct a blower door test to measure air leakage</li>
					<li>Use thermal imaging to detect insulation gaps</li>
					<li>Inspect heating and cooling systems</li>
					<li>Review windows, doors, and building envelope</li>
					<li>Assess ventilation and indoor air quality</li>
				</ul>

				<p>The results will help you prioritize energy upgrades and qualify for rebates.</p>`,
			},
			{
				title: 'Why Get an Energy Assessment?',
				content: `<p>An energy assessment provides multiple benefits:</p>

				<h3>Financial Benefits</h3>
				<ul>
					<li><strong>Lower energy bills:</strong> Identify the upgrades that will save you the most money</li>
					<li><strong>Rebate eligibility:</strong> Required for most BC energy efficiency rebate programs</li>
					<li><strong>Increased home value:</strong> Energy-efficient homes command higher resale prices</li>
				</ul>

				<h3>Comfort Improvements</h3>
				<ul>
					<li>Eliminate drafts and cold spots</li>
					<li>Improve indoor air quality</li>
					<li>Reduce moisture and mold risks</li>
					<li>Better temperature consistency</li>
				</ul>

				<h3>Environmental Impact</h3>
				<p>Reducing your home's energy use directly lowers your carbon footprint and contributes to BC's climate action goals.</p>`,
			},
			{
				title: 'Preparing for Your Assessment',
				content: `<p>Follow these steps to prepare for your energy assessment:</p>

				<h3>Before the Appointment</h3>
				<ol>
					<li><strong>Gather utility bills:</strong> Collect 12 months of energy bills if available</li>
					<li><strong>List concerns:</strong> Note any comfort issues (drafts, cold rooms, high bills)</li>
					<li><strong>Clear access:</strong> Ensure the advisor can access attic, crawlspace, and mechanical room</li>
					<li><strong>Secure pets:</strong> Keep pets in a separate room during the assessment</li>
				</ol>

				<h3>What to Have Ready</h3>
				<ul>
					<li>Recent energy bills (gas and electricity)</li>
					<li>Information about recent renovations</li>
					<li>Details on heating/cooling equipment age</li>
					<li>Any warranties or documentation for major systems</li>
				</ul>`,
			},
			{
				title: 'During the Assessment',
				content: `<p>The assessment typically takes 2-3 hours. Here's what to expect:</p>

				<h3>The Process</h3>
				<ol>
					<li><strong>Initial walkthrough:</strong> The advisor tours your home and asks about your energy concerns</li>
					<li><strong>Blower door test:</strong> A large fan temporarily seals in a doorway to measure air leakage</li>
					<li><strong>Thermal imaging:</strong> Infrared camera reveals heat loss and insulation gaps</li>
					<li><strong>Equipment inspection:</strong> Detailed review of furnace, water heater, and other systems</li>
					<li><strong>Measurements:</strong> Room dimensions, window counts, and building details</li>
				</ol>

				<h3>Questions to Ask</h3>
				<ul>
					<li>What are my home's biggest energy losses?</li>
					<li>Which upgrades should I prioritize?</li>
					<li>What rebates am I eligible for?</li>
					<li>How much could I save annually?</li>
					<li>Can you recommend certified contractors?</li>
				</ul>`,
			},
			{
				title: 'Understanding Your Report',
				content: `<p>Within 2 weeks, you'll receive a detailed energy assessment report.</p>

				<h3>Report Contents</h3>
				<ul>
					<li><strong>Energy rating:</strong> Your home's current energy performance score</li>
					<li><strong>Upgrade recommendations:</strong> Prioritized list of improvements</li>
					<li><strong>Cost estimates:</strong> Approximate costs for each upgrade</li>
					<li><strong>Savings projections:</strong> Expected annual energy savings</li>
					<li><strong>Rebate information:</strong> Available incentives for each upgrade</li>
				</ul>

				<h3>Next Steps</h3>
				<ol>
					<li>Review recommendations with your family</li>
					<li>Determine your budget and priorities</li>
					<li>Contact HPSC-certified contractors for quotes</li>
					<li>Apply for rebates before starting work</li>
					<li>Schedule a post-retrofit assessment to verify improvements</li>
				</ol>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Pro Tip:</strong> Keep your assessment report - you'll need it to apply for rebates and it's valuable documentation for future home sales.
				</p>`,
			},
		],
		relatedGuides: [
			{
				slug: 'understanding-rebate-programs',
				title: 'Understanding BC Energy Rebate Programs',
				image: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=400&h=300&fit=crop',
			},
			{
				slug: 'choosing-the-right-insulation',
				title: 'Choosing the Right Insulation for Your Home',
				image: 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=400&h=300&fit=crop',
			},
		],
	},
	'understanding-rebate-programs': {
		title: 'Understanding BC Energy Rebate Programs',
		description:
			'Navigate the landscape of energy efficiency rebates and incentives available to BC homeowners.',
		category: 'Homeowners',
		difficulty: 'Beginner',
		readTime: '12 min',
		author: 'HPSC Team',
		date: '2025-01-04',
		image: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=1200&h=600&fit=crop',
		steps: [
			{
				title: 'Overview of BC Rebate Programs',
				content: `<p>British Columbia offers one of the most comprehensive energy rebate programs in Canada. Understanding what's available can save you thousands on home upgrades.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=800&h=450&fit=crop" alt="Energy efficiency rebate application" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">BC homeowners can access multiple rebate programs</p>
				</div>

				<h3>Main Rebate Programs</h3>
				<ul>
					<li><strong>CleanBC Better Homes:</strong> Provincial rebates for heat pumps, insulation, and windows</li>
					<li><strong>BC Hydro Programs:</strong> Rebates and incentives for electricity customers</li>
					<li><strong>FortisBC Rebates:</strong> Natural gas customer incentives</li>
					<li><strong>Income-Qualified Programs:</strong> Enhanced rebates for low-income households</li>
					<li><strong>Federal Greener Homes Grant:</strong> Up to $5,000 for eligible upgrades</li>
				</ul>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Good News:</strong> Many rebates can be stacked, meaning you can receive multiple incentives for the same upgrade.
				</p>`,
			},
			{
				title: 'CleanBC Better Homes Program',
				content: `<p>The flagship provincial program offers substantial rebates for major energy upgrades.</p>

				<h3>Available Rebates</h3>
				<div class="my-6 bg-white rounded-xl shadow-md overflow-hidden">
					<table class="min-w-full divide-y divide-gray-200">
						<thead class="bg-gray-50">
							<tr>
								<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Upgrade</th>
								<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rebate Amount</th>
							</tr>
						</thead>
						<tbody class="divide-y divide-gray-200">
							<tr>
								<td class="px-6 py-4 text-sm text-gray-900">Cold-climate heat pump</td>
								<td class="px-6 py-4 text-sm font-semibold text-primary">Up to $7,000</td>
							</tr>
							<tr>
								<td class="px-6 py-4 text-sm text-gray-900">Insulation upgrades</td>
								<td class="px-6 py-4 text-sm font-semibold text-primary">Up to $5,500</td>
							</tr>
							<tr>
								<td class="px-6 py-4 text-sm text-gray-900">Windows and doors</td>
								<td class="px-6 py-4 text-sm font-semibold text-primary">Up to $3,000</td>
							</tr>
							<tr>
								<td class="px-6 py-4 text-sm text-gray-900">Air sealing</td>
								<td class="px-6 py-4 text-sm font-semibold text-primary">Up to $1,000</td>
							</tr>
						</tbody>
					</table>
				</div>

				<h3>Eligibility Requirements</h3>
				<ul>
					<li>Must complete a pre-upgrade energy assessment</li>
					<li>Use HPSC-certified contractors</li>
					<li>Upgrades must meet program specifications</li>
					<li>Complete within 18 months of assessment</li>
				</ul>`,
			},
			{
				title: 'Utility Company Incentives',
				content: `<p>Your utility company likely offers additional rebates that can be combined with provincial programs.</p>

				<div class="my-6 aspect-video rounded-xl overflow-hidden bg-gray-900">
					<iframe
						width="100%"
						height="100%"
						src="https://www.youtube.com/embed/dQw4w9WgXcQ"
						title="BC Utility Rebate Programs Explained"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen
						class="w-full h-full"
					></iframe>
					<p class="text-sm text-gray-500 mt-2 italic">Video: How to maximize utility rebates</p>
				</div>

				<h3>BC Hydro Offers</h3>
				<ul>
					<li>Heat pump water heater rebates: $500-$1,000</li>
					<li>Smart thermostat incentives: $50-$100</li>
					<li>LED lighting packages (often free)</li>
					<li>Appliance rebates for ENERGY STAR models</li>
				</ul>

				<h3>FortisBC Programs</h3>
				<ul>
					<li>Furnace upgrades: Up to $1,500</li>
					<li>Fireplace rebates: $100-$250</li>
					<li>Weatherization incentives</li>
					<li>Home energy coaching (free)</li>
				</ul>`,
			},
			{
				title: 'Application Process',
				content: `<p>Follow these steps to successfully claim your rebates.</p>

				<h3>Step-by-Step Application</h3>
				<ol>
					<li><strong>Schedule energy assessment:</strong> Book with a certified energy advisor</li>
					<li><strong>Receive assessment report:</strong> Wait 1-2 weeks for your detailed report</li>
					<li><strong>Pre-approval (if required):</strong> Submit application before starting work</li>
					<li><strong>Get quotes:</strong> Obtain estimates from certified contractors</li>
					<li><strong>Complete upgrades:</strong> Ensure work meets program specifications</li>
					<li><strong>Post-upgrade assessment:</strong> Have advisor verify completed work</li>
					<li><strong>Submit final application:</strong> Include all invoices and documentation</li>
					<li><strong>Receive payment:</strong> Allow 6-8 weeks for processing</li>
				</ol>

				<div class="my-6 bg-gray-50 border-2 border-gray-200 rounded-xl overflow-hidden">
					<div class="bg-gray-100 px-6 py-3 border-b border-gray-200">
						<h4 class="font-bold text-gray-900 flex items-center gap-2">
							<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
							</svg>
							Rebate Application Checklist
						</h4>
					</div>
					<iframe
						src="/documents/sample-document.pdf#view=FitH"
						class="w-full border-0"
						style="height: 600px;"
						title="Rebate Application Checklist"
					></iframe>
					<div class="bg-gray-100 px-6 py-3 border-t border-gray-200 flex items-center justify-between">
						<p class="text-sm text-gray-600">Complete rebate application guide with checklists</p>
						<a
							href="/documents/sample-document.pdf"
							download
							class="inline-flex items-center gap-2 text-primary hover:text-primary-dark font-medium text-sm"
						>
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
							</svg>
							Download PDF
						</a>
					</div>
				</div>

				<p class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4">
					<strong>Important:</strong> Most programs require pre-approval. Never start work before confirming your application is approved.
				</p>`,
			},
			{
				title: 'Maximizing Your Rebates',
				content: `<p>Strategic planning can help you access the maximum rebate amounts available.</p>

				<h3>Tips for Maximum Savings</h3>
				<ul>
					<li><strong>Bundle upgrades:</strong> Combining multiple improvements often triggers higher rebate tiers</li>
					<li><strong>Check all programs:</strong> Don't assume you're ineligible - many homeowners qualify for income-based programs</li>
					<li><strong>Time it right:</strong> Some programs have annual deadlines or first-come funding</li>
					<li><strong>Keep all receipts:</strong> Detailed documentation speeds up processing</li>
					<li><strong>Use certified contractors:</strong> Non-certified work isn't eligible for most rebates</li>
				</ul>

				<h3>Common Mistakes to Avoid</h3>
				<ul>
					<li>Starting work before receiving approval</li>
					<li>Using non-certified contractors or products</li>
					<li>Missing application deadlines</li>
					<li>Incomplete documentation</li>
					<li>Not completing post-upgrade assessment</li>
				</ul>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Pro Tip:</strong> Work with HPSC-certified contractors who have experience navigating rebate programs. They can help maximize your incentives.
				</p>`,
			},
		],
		relatedGuides: [
			{
				slug: 'getting-started-with-home-energy-assessments',
				title: 'Getting Started with Home Energy Assessments',
				image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop',
			},
			{
				slug: 'heat-pump-installation-checklist',
				title: 'Heat Pump Installation: Complete Checklist',
				image: 'https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=400&h=300&fit=crop',
			},
		],
	},
	'air-sealing-best-practices': {
		title: 'Air Sealing Best Practices for Contractors',
		description:
			'Professional techniques for effective air sealing to improve home energy efficiency and comfort.',
		category: 'Contractors',
		difficulty: 'Intermediate',
		readTime: '18 min',
		author: 'Technical Team',
		date: '2025-01-03',
		image: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=1200&h=600&fit=crop',
		steps: [
			{
				title: 'Understanding Air Leakage',
				content: `<p>Air leakage is one of the biggest sources of energy waste in homes. Understanding where and why air leaks occur is essential for effective sealing.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&h=450&fit=crop" alt="Contractor sealing air gaps" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">Professional air sealing in action</p>
				</div>

				<h3>Common Air Leakage Points</h3>
				<ul>
					<li><strong>Attic penetrations:</strong> Plumbing stacks, electrical wires, recessed lights</li>
					<li><strong>Rim joists:</strong> Where floor meets foundation walls</li>
					<li><strong>Windows and doors:</strong> Gaps around frames and weatherstripping</li>
					<li><strong>Basement:</strong> Sill plates, utility penetrations</li>
					<li><strong>Walls:</strong> Electrical outlets, switch plates, baseboards</li>
				</ul>

				<h3>Why Air Sealing Matters</h3>
				<p>Proper air sealing provides multiple benefits:</p>
				<ul>
					<li>Reduces heating and cooling costs by 10-30%</li>
					<li>Improves comfort by eliminating drafts</li>
					<li>Controls moisture movement</li>
					<li>Reduces outdoor pollutants and allergens</li>
					<li>Makes insulation more effective</li>
				</ul>`,
			},
			{
				title: 'Diagnostic Testing',
				content: `<p>Always start with diagnostic testing to identify the biggest air leakage sources.</p>

				<h3>Blower Door Testing</h3>
				<p>A blower door test quantifies air leakage and helps prioritize sealing efforts.</p>

				<div class="image-carousel my-6" data-carousel="blower-door">
					<div class="carousel-container relative rounded-xl overflow-hidden">
						<div class="carousel-slides">
							<div class="carousel-slide active">
								<img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&h=450&fit=crop" alt="Blower door test setup" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Blower door fan installed in doorway</p>
							</div>
							<div class="carousel-slide">
								<img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800&h=450&fit=crop" alt="Pressure gauge reading" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Digital pressure gauge showing air leakage rates</p>
							</div>
							<div class="carousel-slide">
								<img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&h=450&fit=crop" alt="Thermal imaging during test" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Using thermal camera to identify leaks during test</p>
							</div>
						</div>
						<button class="carousel-btn carousel-prev absolute left-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg">
							<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
							</svg>
						</button>
						<button class="carousel-btn carousel-next absolute right-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg">
							<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
							</svg>
						</button>
						<div class="carousel-dots absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
							<button class="carousel-dot active w-2 h-2 rounded-full bg-white" data-index="0"></button>
							<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="1"></button>
							<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="2"></button>
						</div>
					</div>
				</div>

				<h3>Test Procedure</h3>
				<ol>
					<li>Close all exterior doors and windows</li>
					<li>Open interior doors</li>
					<li>Turn off combustion appliances</li>
					<li>Install blower door and depressurize home to -50 Pascals</li>
					<li>Use thermal camera or smoke pencil to locate leaks</li>
					<li>Document findings with photos and measurements</li>
				</ol>`,
			},
			{
				title: 'Material Selection',
				content: `<p>Choosing the right materials for each application is critical for long-lasting air sealing.</p>

				<h3>Sealant Types</h3>
				<div class="my-6 bg-white rounded-xl shadow-md p-6">
					<h4 class="font-bold mb-4">Recommended Materials by Application</h4>
					<ul class="space-y-3">
						<li>
							<strong class="text-primary">Spray foam (low-expansion):</strong>
							<p class="text-sm text-gray-600">Rim joists, large gaps, irregular surfaces</p>
						</li>
						<li>
							<strong class="text-primary">Acoustical sealant:</strong>
							<p class="text-sm text-gray-600">Top and bottom plates, drywall joints, areas requiring flexibility</p>
						</li>
						<li>
							<strong class="text-primary">Caulk (acrylic or polyurethane):</strong>
							<p class="text-sm text-gray-600">Window/door frames, baseboards, small cracks</p>
						</li>
						<li>
							<strong class="text-primary">Weatherstripping:</strong>
							<p class="text-sm text-gray-600">Operable windows and doors, attic hatches</p>
						</li>
						<li>
							<strong class="text-primary">Rigid foam board:</strong>
							<p class="text-sm text-gray-600">Basement headers, large openings, insulating while sealing</p>
						</li>
					</ul>
				</div>

				<h3>Material Selection Guidelines</h3>
				<ul>
					<li>Use low-VOC products for occupied spaces</li>
					<li>Select fire-rated materials for code-required locations</li>
					<li>Choose materials compatible with substrate (won't degrade)</li>
					<li>Consider UV resistance for exterior applications</li>
					<li>Match flexibility to building movement requirements</li>
				</ul>`,
			},
			{
				title: 'Installation Techniques',
				content: `<p>Proper installation techniques ensure effective and durable air sealing.</p>

				<h3>Priority Areas (Top to Bottom)</h3>

				<h4 class="text-lg font-bold mt-6 mb-3">1. Attic Plane</h4>
				<ul>
					<li>Seal all penetrations before adding insulation</li>
					<li>Use fire-rated materials around chimneys and flues</li>
					<li>Create dams around recessed lights (IC-rated only)</li>
					<li>Seal attic hatch with weatherstripping and latches</li>
				</ul>

				<div class="my-6 aspect-video rounded-xl overflow-hidden bg-gray-900">
					<iframe
						width="100%"
						height="100%"
						src="https://www.youtube.com/embed/dQw4w9WgXcQ"
						title="Attic Air Sealing Techniques"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen
						class="w-full h-full"
					></iframe>
					<p class="text-sm text-gray-500 mt-2 italic">Video: Professional attic air sealing demonstration</p>
				</div>

				<h4 class="text-lg font-bold mt-6 mb-3">2. Walls</h4>
				<ul>
					<li>Seal behind electrical boxes (use foam pads or sealant)</li>
					<li>Caulk baseboards to floor and wall</li>
					<li>Seal around window and door rough openings</li>
				</ul>

				<h4 class="text-lg font-bold mt-6 mb-3">3. Basement/Crawlspace</h4>
				<ul>
					<li>Spray foam rim joists (entire perimeter)</li>
					<li>Seal sill plate to foundation</li>
					<li>Seal utility penetrations</li>
					<li>Install vapor barrier (if required by building science)</li>
				</ul>`,
			},
			{
				title: 'Verification and Quality Control',
				content: `<p>Always verify your air sealing work with post-sealing testing.</p>

				<h3>Quality Control Process</h3>
				<ol>
					<li><strong>Visual inspection:</strong> Check all sealed areas for gaps or voids</li>
					<li><strong>Post-blower door test:</strong> Verify minimum 20-30% reduction in air leakage</li>
					<li><strong>Combustion safety test:</strong> Ensure appliances draft properly</li>
					<li><strong>Ventilation verification:</strong> Confirm adequate mechanical ventilation</li>
					<li><strong>Document results:</strong> Provide before/after test results to homeowner</li>
				</ol>

				<h3>Combustion Safety</h3>
				<p class="bg-red-50 border-l-4 border-red-500 p-4 my-4">
					<strong>Critical Safety Check:</strong> After air sealing, always verify that combustion appliances (furnaces, water heaters, fireplaces) draft properly. Tight homes can cause backdrafting of dangerous combustion gases.
				</p>

				<h3>Ventilation Requirements</h3>
				<p>Homes sealed below 3 ACH50 typically require mechanical ventilation (HRV or ERV) to maintain indoor air quality.</p>

				<div class="my-6 bg-gray-50 border-2 border-gray-200 rounded-xl p-6">
					<h4 class="font-bold text-gray-900 mb-3 flex items-center gap-2">
						<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
						</svg>
						Air Sealing Quality Checklist
					</h4>
					<p class="text-gray-600 mb-4">Download our comprehensive quality control checklist for air sealing projects.</p>
					<a href="/documents/sample-document.pdf" target="_blank" class="inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
						</svg>
						Download Checklist
					</a>
				</div>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Pro Tip:</strong> Take before/after blower door test photos showing the house pressure and results. This documentation is valuable for rebate applications and demonstrates quality work to homeowners.
				</p>`,
			},
		],
		relatedGuides: [
			{
				slug: 'blower-door-testing-guide',
				title: 'Complete Guide to Blower Door Testing',
				image: 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=400&h=300&fit=crop',
			},
			{
				slug: 'choosing-the-right-insulation',
				title: 'Choosing the Right Insulation for Your Home',
				image: 'https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=400&h=300&fit=crop',
			},
		],
	},
	'choosing-the-right-insulation': {
		title: 'Choosing the Right Insulation for Your Home',
		description:
			'A comprehensive guide to insulation types, R-values, and selecting the best option for your climate and budget.',
		category: 'Homeowners',
		difficulty: 'Beginner',
		readTime: '14 min',
		author: 'HPSC Team',
		date: '2025-01-02',
		image: 'https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=1200&h=600&fit=crop',
		steps: [
			{
				title: 'Understanding Insulation and R-Value',
				content: `<p>Insulation resists heat flow, keeping your home warm in winter and cool in summer. The effectiveness is measured by R-value - the higher the number, the better the insulation.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800&h=450&fit=crop" alt="Various insulation materials" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">Different insulation types serve different applications</p>
				</div>

				<h3>What is R-Value?</h3>
				<p>R-value measures thermal resistance. In BC's climate zones:</p>
				<ul>
					<li><strong>Attics:</strong> R-50 to R-60 recommended</li>
					<li><strong>Walls:</strong> R-20 to R-24 for new construction</li>
					<li><strong>Basements:</strong> R-20 for below-grade walls</li>
					<li><strong>Floors:</strong> R-25 to R-30 over unheated spaces</li>
				</ul>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Important:</strong> More insulation isn't always better. Air sealing is often more cost-effective than exceeding recommended R-values.
				</p>`,
			},
			{
				title: 'Insulation Types Compared',
				content: `<p>Each insulation type has specific advantages for different applications.</p>

				<div class="image-carousel my-6" data-carousel="insulation-types">
					<div class="carousel-container relative rounded-xl overflow-hidden">
						<div class="carousel-slides">
							<div class="carousel-slide active">
								<img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&h=450&fit=crop" alt="Fiberglass batt insulation" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Fiberglass batts - most common and affordable</p>
							</div>
							<div class="carousel-slide">
								<img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&h=450&fit=crop" alt="Spray foam insulation" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Spray foam - highest R-value per inch, air sealing included</p>
							</div>
							<div class="carousel-slide">
								<img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800&h=450&fit=crop" alt="Blown-in cellulose insulation" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Blown cellulose - excellent for retrofits and irregular spaces</p>
							</div>
							<div class="carousel-slide">
								<img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=450&fit=crop" alt="Rigid foam board insulation" class="w-full h-auto" />
								<p class="text-sm text-gray-500 mt-2 italic">Rigid foam boards - great for basements and exteriors</p>
							</div>
						</div>
						<button class="carousel-btn carousel-prev absolute left-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg">
							<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
							</svg>
						</button>
						<button class="carousel-btn carousel-next absolute right-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg">
							<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
							</svg>
						</button>
						<div class="carousel-dots absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
							<button class="carousel-dot active w-2 h-2 rounded-full bg-white" data-index="0"></button>
							<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="1"></button>
							<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="2"></button>
							<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="3"></button>
						</div>
					</div>
				</div>

				<h3>Quick Comparison</h3>
				<div class="my-6 bg-white rounded-xl shadow-md overflow-hidden">
					<table class="min-w-full divide-y divide-gray-200 text-sm">
						<thead class="bg-gray-50">
							<tr>
								<th class="px-4 py-3 text-left font-medium text-gray-500 uppercase">Type</th>
								<th class="px-4 py-3 text-left font-medium text-gray-500 uppercase">R-Value/inch</th>
								<th class="px-4 py-3 text-left font-medium text-gray-500 uppercase">Cost</th>
								<th class="px-4 py-3 text-left font-medium text-gray-500 uppercase">Best For</th>
							</tr>
						</thead>
						<tbody class="divide-y divide-gray-200">
							<tr>
								<td class="px-4 py-3 font-semibold">Fiberglass Batts</td>
								<td class="px-4 py-3">R-3.2 to R-3.8</td>
								<td class="px-4 py-3 text-green-600">$</td>
								<td class="px-4 py-3">Standard framing, DIY-friendly</td>
							</tr>
							<tr>
								<td class="px-4 py-3 font-semibold">Blown Cellulose</td>
								<td class="px-4 py-3">R-3.6 to R-3.8</td>
								<td class="px-4 py-3 text-green-600">$$</td>
								<td class="px-4 py-3">Attics, retrofits</td>
							</tr>
							<tr>
								<td class="px-4 py-3 font-semibold">Spray Foam (open)</td>
								<td class="px-4 py-3">R-3.6 to R-3.9</td>
								<td class="px-4 py-3 text-orange-600">$$$</td>
								<td class="px-4 py-3">Irregular spaces, air sealing</td>
							</tr>
							<tr>
								<td class="px-4 py-3 font-semibold">Spray Foam (closed)</td>
								<td class="px-4 py-3">R-6.0 to R-7.0</td>
								<td class="px-4 py-3 text-red-600">$$$$</td>
								<td class="px-4 py-3">Highest performance, moisture barrier</td>
							</tr>
							<tr>
								<td class="px-4 py-3 font-semibold">Rigid Foam</td>
								<td class="px-4 py-3">R-4.0 to R-6.5</td>
								<td class="px-4 py-3 text-yellow-600">$$-$$$</td>
								<td class="px-4 py-3">Basements, exteriors</td>
							</tr>
						</tbody>
					</table>
				</div>`,
			},
			{
				title: 'Where to Prioritize Insulation',
				content: `<p>Not all insulation upgrades provide equal returns. Here's where to focus your efforts and budget.</p>

				<h3>Priority Order</h3>
				<ol>
					<li>
						<strong>Attic/Ceiling:</strong> Biggest impact per dollar
						<ul class="mt-2">
							<li>Heat rises, making this the most critical area</li>
							<li>Usually easiest to access and upgrade</li>
							<li>Aim for R-50 to R-60 in BC climates</li>
						</ul>
					</li>
					<li class="mt-4">
						<strong>Basement/Crawlspace:</strong> Second priority
						<ul class="mt-2">
							<li>Reduces heat loss through foundation</li>
							<li>Controls moisture and improves comfort</li>
							<li>Can insulate walls or ceiling (not both)</li>
						</ul>
					</li>
					<li class="mt-4">
						<strong>Walls:</strong> Consider for major renovations
						<ul class="mt-2">
							<li>More expensive to upgrade in existing homes</li>
							<li>Best done during siding replacement</li>
							<li>Blown-in insulation for retrofit applications</li>
						</ul>
					</li>
				</ol>

				<div class="my-6 aspect-video rounded-xl overflow-hidden bg-gray-900">
					<iframe
						width="100%"
						height="100%"
						src="https://www.youtube.com/embed/dQw4w9WgXcQ"
						title="Insulation Priority Guide"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen
						class="w-full h-full"
					></iframe>
					<p class="text-sm text-gray-500 mt-2 italic">Video: Where to insulate first for maximum savings</p>
				</div>`,
			},
			{
				title: 'Installation Considerations',
				content: `<p>Proper installation is crucial - poorly installed insulation performs far below its rated R-value.</p>

				<h3>Critical Installation Rules</h3>
				<ul>
					<li><strong>No gaps or compression:</strong> Insulation must fill spaces completely without being compressed</li>
					<li><strong>Air sealing first:</strong> Always seal air leaks before insulating</li>
					<li><strong>Vapor barriers:</strong> Install on warm side of assembly (usually interior in BC)</li>
					<li><strong>Ventilation:</strong> Maintain proper attic and crawlspace ventilation</li>
					<li><strong>Electrical safety:</strong> Use IC-rated recessed lights or seal with fire-rated materials</li>
				</ul>

				<p class="bg-red-50 border-l-4 border-red-500 p-4 my-4">
					<strong>Safety Warning:</strong> Never cover recessed lights, electrical junctions, or heat-producing equipment with insulation unless specifically rated for such use.
				</p>

				<h3>Common Installation Mistakes</h3>
				<ul>
					<li>Compressing batts into cavities (reduces R-value)</li>
					<li>Leaving gaps around pipes, wires, and boxes</li>
					<li>Blocking soffit vents in attics</li>
					<li>Installing vapor barrier on wrong side</li>
					<li>Insulating before air sealing</li>
				</ul>

				<div class="my-6 bg-gray-50 border-2 border-gray-200 rounded-xl p-6">
					<h4 class="font-bold text-gray-900 mb-3 flex items-center gap-2">
						<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
						</svg>
						BC Building Code Insulation Guide
					</h4>
					<p class="text-gray-600 mb-4">Download the official BC Building Code requirements for insulation in residential construction.</p>
					<a href="/documents/sample-document.pdf" target="_blank" class="inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
						</svg>
						Download Guide
					</a>
				</div>`,
			},
			{
				title: 'Budgeting and Rebates',
				content: `<p>Insulation upgrades can be expensive, but rebates and long-term savings make them worthwhile investments.</p>

				<h3>Typical Costs (BC, 2025)</h3>
				<ul>
					<li><strong>Attic insulation (blown):</strong> $1.50-$3.00 per sq ft</li>
					<li><strong>Basement walls (spray foam):</strong> $3.00-$5.00 per sq ft</li>
					<li><strong>Wall retrofit (blown-in):</strong> $2.00-$4.00 per sq ft</li>
					<li><strong>Crawlspace encapsulation:</strong> $5,000-$15,000 (varies widely)</li>
				</ul>

				<h3>Available Rebates</h3>
				<ul>
					<li><strong>CleanBC Better Homes:</strong> Up to $5,500 for insulation upgrades</li>
					<li><strong>Utility programs:</strong> Additional incentives from BC Hydro or FortisBC</li>
					<li><strong>Federal Greener Homes:</strong> Additional $5,000 available</li>
					<li><strong>Income-qualified programs:</strong> Enhanced rebates up to $10,000</li>
				</ul>

				<h3>Return on Investment</h3>
				<p>Typical payback periods for insulation upgrades:</p>
				<ul>
					<li>Attic insulation: 3-7 years</li>
					<li>Basement insulation: 7-12 years</li>
					<li>Wall insulation: 10-20 years (best combined with other renovations)</li>
				</ul>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Pro Tip:</strong> Combine insulation work with other projects (re-roofing, siding replacement) to reduce overall costs and disruption.
				</p>`,
			},
		],
		relatedGuides: [
			{
				slug: 'air-sealing-best-practices',
				title: 'Air Sealing Best Practices for Contractors',
				image: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&h=300&fit=crop',
			},
			{
				slug: 'getting-started-with-home-energy-assessments',
				title: 'Getting Started with Home Energy Assessments',
				image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop',
			},
		],
	},
	'blower-door-testing-guide': {
		title: 'Complete Guide to Blower Door Testing',
		description:
			'Professional guide to conducting accurate blower door tests and interpreting results for home performance contractors.',
		category: 'Contractors',
		difficulty: 'Advanced',
		readTime: '20 min',
		author: 'Technical Team',
		date: '2025-01-01',
		image: 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=1200&h=600&fit=crop',
		steps: [
			{
				title: 'Blower Door Testing Fundamentals',
				content: `<p>Blower door testing is the gold standard for measuring building air tightness. It's required for energy assessments, code compliance, and quality verification.</p>

				<div class="my-6 rounded-xl overflow-hidden">
					<img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&h=450&fit=crop" alt="Blower door test equipment" class="w-full h-auto" />
					<p class="text-sm text-gray-500 mt-2 italic">Professional blower door testing equipment</p>
				</div>

				<h3>What the Test Measures</h3>
				<ul>
					<li><strong>ACH50:</strong> Air changes per hour at 50 Pascals pressure difference</li>
					<li><strong>CFM50:</strong> Cubic feet per minute of air leakage at 50 Pascals</li>
					<li><strong>EqLA:</strong> Equivalent leakage area (total hole size)</li>
					<li><strong>ELA:</strong> Effective leakage area at 4 Pascals</li>
				</ul>

				<h3>Target Performance (BC)</h3>
				<ul>
					<li><strong>Existing homes:</strong> Often 8-15 ACH50 before retrofits</li>
					<li><strong>BC Building Code (new):</strong> 3.0 ACH50 or less</li>
					<li><strong>ENERGY STAR:</strong> 2.5 ACH50 or less</li>
					<li><strong>Passive House:</strong> 0.6 ACH50 or less</li>
					<li><strong>R-2000:</strong> 1.5 ACH50 or less</li>
				</ul>`,
			},
			{
				title: 'Equipment and Setup',
				content: `<p>Proper equipment setup is critical for accurate, repeatable results.</p>

				<h3>Required Equipment</h3>
				<ul>
					<li>Blower door fan (calibrated annually)</li>
					<li>Digital pressure gauge (manometer)</li>
					<li>Door panel and frame</li>
					<li>Smoke pencils or thermal camera (for leak detection)</li>
					<li>Tape measure (for building volume calculation)</li>
				</ul>

				<h3>Pre-Test Preparation</h3>
				<ol>
					<li><strong>Building configuration:</strong>
						<ul class="mt-2">
							<li>Close all exterior doors and windows</li>
							<li>Open all interior doors</li>
							<li>Close fireplace dampers</li>
							<li>Turn off HVAC system</li>
							<li>Turn off exhaust fans</li>
						</ul>
					</li>
					<li class="mt-4"><strong>Combustion appliances:</strong>
						<ul class="mt-2">
							<li>Turn off all fuel-burning appliances</li>
							<li>Or test with CAZ (Combustion Appliance Zone) protocol</li>
						</ul>
					</li>
					<li class="mt-4"><strong>Calculate building volume:</strong>
						<ul class="mt-2">
							<li>Measure conditioned floor area and ceiling heights</li>
							<li>Include basement and attached garages if conditioned</li>
							<li>Exclude unconditioned spaces</li>
						</ul>
					</li>
				</ol>`,
			},
			{
				title: 'Conducting the Test',
				content: `<p>Follow standardized procedures for consistent, accurate results.</p>

				<div class="my-6 aspect-video rounded-xl overflow-hidden bg-gray-900">
					<iframe
						width="100%"
						height="100%"
						src="https://www.youtube.com/embed/dQw4w9WgXcQ"
						title="Professional Blower Door Testing Procedure"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen
						class="w-full h-full"
					></iframe>
					<p class="text-sm text-gray-500 mt-2 italic">Video: Step-by-step blower door testing procedure</p>
				</div>

				<h3>Test Procedure</h3>
				<ol>
					<li><strong>Install equipment:</strong> Mount fan in door frame, ensure tight seal</li>
					<li><strong>Baseline measurements:</strong> Record indoor/outdoor temperature and pressure</li>
					<li><strong>Depressurization test:</strong>
						<ul class="mt-2">
							<li>Start fan at low speed</li>
							<li>Gradually increase to achieve -50 Pascals</li>
							<li>Record CFM50 once pressure stabilizes</li>
							<li>Take multiple readings at different pressures for quality control</li>
						</ul>
					</li>
					<li class="mt-4"><strong>Pressurization test (optional but recommended):</strong>
						<ul class="mt-2">
							<li>Reverse fan direction</li>
							<li>Achieve +50 Pascals</li>
							<li>Record CFM50</li>
						</ul>
					</li>
					<li class="mt-4"><strong>Calculate results:</strong>
						<ul class="mt-2">
							<li>Average depressurization and pressurization if both conducted</li>
							<li>Calculate ACH50 from CFM50 and building volume</li>
							<li>Compare to targets and code requirements</li>
						</ul>
					</li>
				</ol>

				<p class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4">
					<strong>Important:</strong> Results can vary 10-15% between tests due to wind, temperature, and other factors. Always follow standardized protocols.
				</p>`,
			},
			{
				title: 'Leak Detection and Prioritization',
				content: `<p>Use the pressure difference during testing to identify and locate air leaks.</p>

				<div class="image-carousel my-6" data-carousel="leak-detection">
					<div class="carousel-container relative rounded-xl overflow-hidden">
						<div class="carousel-slide active">
							<img src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&h=450&fit=crop" alt="Thermal imaging during blower door test" class="w-full h-auto" />
							<p class="text-sm text-gray-500 mt-2 italic">Thermal camera showing air leakage</p>
						</div>
						<div class="carousel-slide">
							<img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800&h=450&fit=crop" alt="Smoke pencil test" class="w-full h-auto" />
							<p class="text-sm text-gray-500 mt-2 italic">Using smoke pencil to visualize air movement</p>
						</div>
						<div class="carousel-slide">
							<img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=450&fit=crop" alt="Common leak locations" class="w-full h-auto" />
							<p class="text-sm text-gray-500 mt-2 italic">Common leak locations around windows and baseboards</p>
						</div>
					</div>
					<button class="carousel-btn carousel-prev absolute left-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
						</svg>
					</button>
					<button class="carousel-btn carousel-next absolute right-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
						</svg>
					</button>
					<div class="carousel-dots absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
						<button class="carousel-dot active w-2 h-2 rounded-full bg-white" data-index="0"></button>
						<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="1"></button>
						<button class="carousel-dot w-2 h-2 rounded-full bg-white/50" data-index="2"></button>
					</div>
				</div>

				<h3>Leak Detection Methods</h3>
				<ul>
					<li><strong>Thermal imaging:</strong> Best for comprehensive leak detection, works well in cold weather</li>
					<li><strong>Smoke pencils:</strong> Inexpensive, effective for pinpointing specific leaks</li>
					<li><strong>Visual inspection:</strong> Look for obvious gaps, cracks, and penetrations</li>
					<li><strong>Feel for drafts:</strong> Use your hand to detect air movement</li>
				</ul>

				<h3>Priority Leak Locations</h3>
				<ol>
					<li>Attic penetrations (lights, vents, wiring)</li>
					<li>Rim joists and sill plates</li>
					<li>Window and door frames</li>
					<li>Electrical outlets and switches</li>
					<li>Plumbing and HVAC penetrations</li>
					<li>Chimney and fireplace surrounds</li>
					<li>Basement or crawlspace</li>
				</ol>`,
			},
			{
				title: 'Interpreting and Reporting Results',
				content: `<p>Provide clients with clear, actionable reports that explain test results and recommended improvements.</p>

				<h3>Key Metrics to Report</h3>
				<ul>
					<li><strong>ACH50:</strong> Air changes per hour (most common metric)</li>
					<li><strong>CFM50:</strong> Cubic feet per minute at 50 Pascals</li>
					<li><strong>EqLA:</strong> Equivalent leakage area</li>
					<li><strong>Comparison to targets:</strong> Code, ENERGY STAR, best practice</li>
					<li><strong>Estimated savings:</strong> Energy and cost savings from air sealing</li>
				</ul>

				<h3>Report Components</h3>
				<ol>
					<li>Test conditions (weather, building configuration)</li>
					<li>Building dimensions and volume</li>
					<li>Test results (depressurization and pressurization)</li>
					<li>Photos of major leak locations</li>
					<li>Prioritized recommendations for air sealing</li>
					<li>Cost estimates for recommended work</li>
					<li>Projected energy savings</li>
				</ol>

				<div class="my-6 bg-gray-50 border-2 border-gray-200 rounded-xl overflow-hidden">
					<div class="bg-gray-100 px-6 py-3 border-b border-gray-200">
						<h4 class="font-bold text-gray-900 flex items-center gap-2">
							<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
							</svg>
							Sample Blower Door Test Report Template
						</h4>
					</div>
					<iframe
						src="/documents/sample-document.pdf#view=FitH"
						class="w-full border-0"
						style="height: 600px;"
						title="Sample Blower Door Test Report"
					></iframe>
					<div class="bg-gray-100 px-6 py-3 border-t border-gray-200 flex items-center justify-between">
						<p class="text-sm text-gray-600">Professional report template for blower door testing</p>
						<a
							href="/documents/sample-document.pdf"
							download
							class="inline-flex items-center gap-2 text-primary hover:text-primary-dark font-medium text-sm"
						>
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
							</svg>
							Download Template
						</a>
					</div>
				</div>

				<p class="bg-primary/10 p-4 rounded-lg mt-4">
					<strong>Pro Tip:</strong> Include before/after blower door test results in your reports. A 20-30% improvement demonstrates quality workmanship and helps justify the cost of air sealing.
				</p>`,
			},
		],
		relatedGuides: [
			{
				slug: 'air-sealing-best-practices',
				title: 'Air Sealing Best Practices for Contractors',
				image: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&h=300&fit=crop',
			},
			{
				slug: 'getting-started-with-home-energy-assessments',
				title: 'Getting Started with Home Energy Assessments',
				image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop',
			},
		],
	},
};

const guide =
	guides[slug || 'getting-started-with-home-energy-assessments'] ||
	guides['getting-started-with-home-energy-assessments'];

const formattedDate = new Date(guide.date).toLocaleDateString('en-US', {
	year: 'numeric',
	month: 'long',
	day: 'numeric',
});

const pageTitle = `${guide.title} | HPSC Guides`;
---

<Layout
	title={pageTitle}
	description={guide.description}
	keywords={`${guide.category}, guide, tutorial, HPSC`}
>
	<Breadcrumbs
		items={[
			{ label: 'Resources', href: '/resources' },
			{ label: 'Guides', href: '/resources/guides' },
			{ label: guide.title, href: `/resources/guides/${slug}` },
		]}
	/>

	<div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
		<!-- Main Content -->
		<article class="lg:col-span-3">
			<!-- Header -->
			<header class="mb-8">
				<div class="flex flex-wrap items-center gap-3 mb-4">
					<span class="px-3 py-1 bg-primary/10 text-primary text-sm font-semibold rounded-full">
						{guide.category}
					</span>
					<span class="px-3 py-1 bg-gray-100 text-gray-700 text-sm font-semibold rounded-full">
						{guide.difficulty}
					</span>
					<span class="text-sm text-gray-500">
						{guide.steps.length} steps â¢ {guide.readTime}
					</span>
				</div>
				<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4 leading-tight">
					{guide.title}
				</h1>
				<p class="text-xl text-gray-600 mb-4">{guide.description}</p>
				<div class="flex items-center gap-4 text-sm text-gray-500">
					<span>By {guide.author}</span>
					<span>â¢</span>
					<time datetime={guide.date}>{formattedDate}</time>
				</div>
			</header>

			<!-- Featured Image -->
			<div class="mb-12 rounded-2xl overflow-hidden shadow-lg">
				<Image
					src={guide.image}
					alt={guide.title}
					class="w-full h-auto"
					width={1200}
					height={600}
					loading="eager"
				/>
			</div>

			<!-- Steps -->
			<div class="space-y-12">
				{
					guide.steps.map((step: any, index: number) => (
						<div id={`step-${index + 1}`} class="scroll-mt-24">
							<div class="flex items-start gap-4 mb-6">
								<div class="flex-shrink-0 w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center font-bold text-lg">
									{index + 1}
								</div>
								<div class="flex-1">
									<h2 class="text-2xl md:text-3xl font-bold text-gray-900">{step.title}</h2>
								</div>
							</div>
							<div class="pl-0 md:pl-16">
								<div
									class="prose prose-lg max-w-none prose-headings:font-bold prose-h3:text-xl prose-h3:mt-6 prose-h3:mb-3 prose-p:text-gray-700 prose-p:leading-relaxed prose-a:text-primary prose-a:no-underline hover:prose-a:underline prose-ul:my-4 prose-li:my-2 prose-ol:my-4 prose-strong:text-gray-900"
									set:html={step.content}
								/>
							</div>
							{index < guide.steps.length - 1 && <div class="mt-8 pt-8 border-b border-gray-200" />}
						</div>
					))
				}
			</div>

			<!-- Guide Complete -->
			<div
				class="mt-12 p-8 bg-gradient-to-r from-primary/10 to-primary/5 rounded-2xl border-2 border-primary/20"
			>
				<div class="flex items-center gap-3 mb-4">
					<svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
						<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path>
					</svg>
					<h3 class="text-2xl font-bold text-gray-900">Guide Complete!</h3>
				</div>
				<p class="text-gray-700 mb-6">
					You've completed this guide. Ready to take the next step in your home performance journey?
				</p>
				<div class="flex flex-wrap gap-4">
					<a
						href="/resources/guides"
						class="px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary-dark transition-colors"
					>
						Browse More Guides
					</a>
					<a
						href="/contact"
						class="px-6 py-3 bg-white border-2 border-primary text-primary rounded-lg font-semibold hover:bg-primary/5 transition-colors"
					>
						Contact Us
					</a>
				</div>
			</div>

			<!-- Related Guides -->
			{
				guide.relatedGuides && guide.relatedGuides.length > 0 && (
					<div class="mt-12 pt-8 border-t border-gray-200">
						<h2 class="text-2xl font-bold text-gray-900 mb-6">Related Guides</h2>
						<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
							{guide.relatedGuides.map((related: any) => (
								<a
									href={`/resources/guides/${related.slug}`}
									class="group bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow border border-gray-100 hover:border-primary"
								>
									<Image
										src={related.image}
										alt={related.title}
										class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"
										width={400}
										height={300}
										loading="lazy"
									/>
									<div class="p-4">
										<h3 class="font-bold text-gray-900 group-hover:text-primary transition-colors">
											{related.title}
										</h3>
									</div>
								</a>
							))}
						</div>
					</div>
				)
			}
		</article>

		<!-- Sidebar -->
		<aside class="lg:col-span-1">
			<div class="sticky top-24 space-y-6">
				<!-- Progress Tracker -->
				<div class="bg-white rounded-2xl shadow-md p-6">
					<h3 class="text-lg font-bold text-gray-900 mb-4">Progress</h3>
					<div class="space-y-3">
						{
							guide.steps.map((step: any, index: number) => (
								<a href={`#step-${index + 1}`} class="step-link block group" data-step={index + 1}>
									<div class="flex items-center gap-3">
										<div class="flex-shrink-0 w-8 h-8 border-2 border-gray-300 rounded-full flex items-center justify-center text-sm font-semibold text-gray-400 group-hover:border-primary group-hover:text-primary transition-colors">
											{index + 1}
										</div>
										<div class="flex-1 text-sm text-gray-600 group-hover:text-primary transition-colors line-clamp-2">
											{step.title}
										</div>
									</div>
								</a>
							))
						}
					</div>
				</div>

				<!-- Guide Info -->
				<div class="bg-gray-50 rounded-2xl p-6">
					<h3 class="text-lg font-bold text-gray-900 mb-4">Guide Information</h3>
					<dl class="space-y-3 text-sm">
						<div>
							<dt class="font-semibold text-gray-700">Category</dt>
							<dd class="text-gray-600">{guide.category}</dd>
						</div>
						<div>
							<dt class="font-semibold text-gray-700">Difficulty</dt>
							<dd class="text-gray-600">{guide.difficulty}</dd>
						</div>
						<div>
							<dt class="font-semibold text-gray-700">Reading Time</dt>
							<dd class="text-gray-600">{guide.readTime}</dd>
						</div>
						<div>
							<dt class="font-semibold text-gray-700">Total Steps</dt>
							<dd class="text-gray-600">{guide.steps.length}</dd>
						</div>
					</dl>
				</div>

				<!-- Back Button -->
				<a
					href="/resources/guides"
					class="block bg-white rounded-2xl shadow-md p-6 hover:shadow-lg transition-shadow"
				>
					<div class="flex items-center gap-3 text-primary font-semibold">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M15 19l-7-7 7-7"></path>
						</svg>
						Back to All Guides
					</div>
				</a>
			</div>
		</aside>
	</div>
</Layout>

<script>
	// Progress tracking
	const stepLinks = document.querySelectorAll('.step-link');
	const steps = document.querySelectorAll('[id^="step-"]');

	// Intersection Observer for progress tracking
	const observerOptions = {
		root: null,
		rootMargin: '-20% 0px -70% 0px',
		threshold: 0,
	};

	const observer = new IntersectionObserver((entries) => {
		entries.forEach((entry) => {
			if (entry.isIntersecting) {
				const stepId = entry.target.id;
				const stepNumber = stepId.replace('step-', '');

				// Update active state
				stepLinks.forEach((link) => {
					const linkStep = link.getAttribute('data-step');
					const circle = link.querySelector('div > div');
					const text = link.querySelector('div > div:last-child');

					if (linkStep === stepNumber) {
						circle?.classList.remove('border-gray-300', 'text-gray-400');
						circle?.classList.add('border-primary', 'bg-primary', 'text-white');
						text?.classList.remove('text-gray-600');
						text?.classList.add('text-primary', 'font-semibold');
					} else {
						circle?.classList.remove('border-primary', 'bg-primary', 'text-white');
						circle?.classList.add('border-gray-300', 'text-gray-400');
						text?.classList.remove('text-primary', 'font-semibold');
						text?.classList.add('text-gray-600');
					}
				});
			}
		});
	}, observerOptions);

	// Observe all steps
	steps.forEach((step) => {
		observer.observe(step);
	});

	// Smooth scroll for step links
	stepLinks.forEach((link) => {
		link.addEventListener('click', (e) => {
			e.preventDefault();
			const href = link.getAttribute('href');
			if (href) {
				const target = document.querySelector(href);
				if (target) {
					target.scrollIntoView({ behavior: 'smooth', block: 'start' });
				}
			}
		});
	});

	// Image Carousel functionality
	document.querySelectorAll('.image-carousel').forEach((carousel) => {
		const slides = carousel.querySelectorAll('.carousel-slide');
		const dots = carousel.querySelectorAll('.carousel-dot');
		const prevBtn = carousel.querySelector('.carousel-prev');
		const nextBtn = carousel.querySelector('.carousel-next');
		let currentSlide = 0;

		function showSlide(index: number) {
			// Hide all slides
			slides.forEach((slide) => {
				slide.classList.remove('active');
				(slide as HTMLElement).style.display = 'none';
			});

			// Remove active class from all dots
			dots.forEach((dot) => {
				dot.classList.remove('active');
				dot.classList.remove('bg-white');
				dot.classList.add('bg-white/50');
			});

			// Show current slide
			if (slides[index]) {
				(slides[index] as HTMLElement).style.display = 'block';
				slides[index].classList.add('active');
			}

			// Update active dot
			if (dots[index]) {
				dots[index].classList.add('active');
				dots[index].classList.add('bg-white');
				dots[index].classList.remove('bg-white/50');
			}

			currentSlide = index;
		}

		function nextSlide() {
			let next = currentSlide + 1;
			if (next >= slides.length) {
				next = 0;
			}
			showSlide(next);
		}

		function prevSlide() {
			let prev = currentSlide - 1;
			if (prev < 0) {
				prev = slides.length - 1;
			}
			showSlide(prev);
		}

		// Event listeners
		prevBtn?.addEventListener('click', prevSlide);
		nextBtn?.addEventListener('click', nextSlide);

		dots.forEach((dot, index) => {
			dot.addEventListener('click', () => {
				showSlide(index);
			});
		});

		// Initialize first slide
		showSlide(0);

		// Auto-advance every 5 seconds (optional)
		// setInterval(nextSlide, 5000);
	});
</script>

<style>
	.carousel-slide {
		display: none;
	}

	.carousel-slide.active {
		display: block;
	}

	.carousel-btn {
		transition: all 0.3s ease;
	}

	.carousel-btn:hover {
		transform: scale(1.1);
	}

	.carousel-dot {
		cursor: pointer;
		transition: all 0.3s ease;
	}

	.carousel-dot:hover {
		transform: scale(1.2);
	}
</style>
